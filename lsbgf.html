<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lagerverwaltung - FFW</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root {
      --primary:#dc2626;
      --primary-light:#fee2e2;
      --secondary:#1f2937;
      --success:#16a34a;
      --success-light:#dcfce7;
      --warning:#f59e0b;
      --warning-light:#fef3c7;
      --bg:#f8fafc;
      --card:#ffffff;
      --text:#1e293b;
      --text-light:#64748b;
      --border:#e2e8f0;
    }
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;padding-bottom:80px}
    .app-header{background:linear-gradient(135deg,var(--primary),#b91c1c);color:#fff;padding:1rem;position:sticky;top:0;z-index:100;box-shadow:0 2px 8px rgba(0,0,0,0.15)}
    .header-content{display:flex;align-items:center;gap:1rem;max-width:500px;margin:0 auto}
    .back-btn,.header-action{background:rgba(255,255,255,0.2);border:none;color:white;cursor:pointer;border-radius:.5rem}
    .back-btn{padding:.5rem;font-size:1.1rem}
    .header-action{padding:.5rem 1rem;font-size:.875rem;font-weight:600}
    .header-title{font-size:1.25rem;font-weight:700;flex:1}
    .main-content{max-width:500px;margin:0 auto;padding:1rem}
    .search-section{background:var(--card);padding:1rem;border-radius:1rem;margin-bottom:1rem;box-shadow:0 2px 4px rgba(0,0,0,0.05)}
    .search-bar{position:relative;margin-bottom:1rem}
    .search-input{width:100%;padding:1rem;padding-left:3rem;border:2px solid var(--border);border-radius:.75rem;font-size:1rem;background:var(--bg)}
    .search-input:focus{outline:none;border-color:var(--primary)}
    .search-icon{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:var(--text-light)}
    .filter-tabs{display:flex;gap:.5rem;overflow-x:auto;padding-bottom:.25rem}
    .filter-tab{background:var(--bg);border:2px solid var(--border);padding:.5rem 1rem;border-radius:2rem;font-size:.875rem;font-weight:600;cursor:pointer;white-space:nowrap;transition:.2s}
    .filter-tab.active{background:var(--primary);border-color:var(--primary);color:#fff}
    .stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-bottom:1rem}
    .stat-card{background:var(--card);padding:1rem;border-radius:.75rem;text-align:center;box-shadow:0 2px 4px rgba(0,0,0,.05)}
    .stat-number{font-size:1.5rem;font-weight:700;margin-bottom:.25rem}
    .stat-label{font-size:.75rem;color:var(--text-light);text-transform:uppercase;font-weight:600;letter-spacing:.5px}
    .stat-ok{color:var(--success)}.stat-warning{color:var(--warning)}.stat-expired{color:var(--primary)}
    .item-list{display:flex;flex-direction:column;gap:.75rem}
    .item-card{background:var(--card);border-radius:.75rem;padding:1rem;box-shadow:0 2px 4px rgba(0,0,0,.05);border-left:4px solid;transition:.2s;cursor:pointer}
    .item-card:active{transform:scale(.98)}
    .item-card.status-ok{border-color:var(--success)}
    .item-card.status-warning{border-color:var(--warning)}
    .item-card.status-expired{border-color:var(--primary)}
    .item-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:.5rem}
    .item-name{font-size:1rem;font-weight:600;color:var(--text)}
    .item-quantity{background:var(--bg);padding:.25rem .75rem;border-radius:1rem;font-size:.75rem;font-weight:700}
    .item-details{display:flex;justify-content:space-between;align-items:center;font-size:.875rem;color:var(--text-light)}
    .item-location{display:flex;align-items:center;gap:.25rem}
    .status-badge{padding:.25rem .75rem;border-radius:1rem;font-size:.75rem;font-weight:700;text-transform:uppercase}
    .status-ok{background:var(--success-light);color:var(--success)}
    .status-warning{background:var(--warning-light);color:#d97706}
    .status-expired{background:var(--primary-light);color:var(--primary)}
    .quick-actions{display:flex;gap:.5rem;margin-top:.75rem}
    .quick-btn{flex:1;background:var(--bg);border:1px solid var(--border);padding:.5rem;border-radius:.5rem;font-size:.75rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.25rem;transition:.2s}
    .quick-btn:hover{background:var(--primary);color:white;border-color:var(--primary)}
    .fab{position:fixed;bottom:90px;right:1rem;width:56px;height:56px;background:var(--primary);color:#fff;border:none;border-radius:50%;font-size:1.5rem;cursor:pointer;box-shadow:0 4px 12px rgba(220,38,38,0.4);z-index:50;transition:.3s}
    .fab:hover{transform:scale(1.1);box-shadow:0 6px 16px rgba(220,38,38,0.5)}
    .bottom-nav{position:fixed;bottom:0;left:0;right:0;background:var(--card);border-top:1px solid var(--border);padding:.75rem;z-index:100}
    .nav-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem;max-width:500px;margin:0 auto}
    .nav-item{display:flex;flex-direction:column;align-items:center;gap:.25rem;padding:.5rem;color:var(--text-light);font-size:.75rem;font-weight:600;border-radius:.5rem;transition:.2s;text-decoration:none}
    .nav-item.active{color:var(--primary);background:var(--primary-light)}
    .nav-icon{font-size:1.25rem}
    .modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:end;z-index:200;opacity:0;visibility:hidden;transition:.3s}
    .modal.show{opacity:1;visibility:visible}
    .modal-content{background:var(--card);border-radius:1rem 1rem 0 0;padding:1.5rem;width:100%;max-width:500px;margin:0 auto;transform:translateY(100%);transition:.3s}
    .modal.show .modal-content{transform:translateY(0)}
    .form-group{margin-bottom:1rem}
    .form-label{font-weight:600;margin-bottom:.5rem;display:block}
    .form-input,.form-select{width:100%;padding:.75rem;border:2px solid var(--border);border-radius:.5rem;font-size:1rem;background:var(--bg)}
    .form-input:focus,.form-select:focus{border-color:var(--primary);outline:none}
    .btn-primary{background:var(--primary);color:#fff;border:none;padding:1rem;border-radius:.75rem;font-size:1rem;font-weight:600;width:100%;margin-top:1rem;cursor:pointer}
    .loading{display:none;text-align:center;padding:2rem;color:var(--text-light)}
    .empty-state{text-align:center;padding:3rem 1rem;color:var(--text-light)}
    @media(max-width:480px){.main-content{padding:.75rem}.item-card{padding:.75rem}.fab{bottom:100px}}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="app-header">
    <div class="header-content">
      <button class="back-btn" onclick="goBack()"><i class="fas fa-arrow-left"></i></button>
      <h1 class="header-title">Lagerverwaltung</h1>
      <button class="header-action" onclick="scanBarcode()"><i class="fas fa-qrcode"></i></button>
    </div>
  </header>

  <!-- Main -->
  <main class="main-content">
    <div class="search-section">
      <div class="search-bar">
        <i class="fas fa-search search-icon"></i>
        <input type="text" class="search-input" placeholder="Medikament oder Ausrüstung suchen..." oninput="filterItems(this.value)">
      </div>
      <div class="filter-tabs">
        <button class="filter-tab active" data-filter="all" onclick="setFilter('all')">Alle</button>
        <button class="filter-tab" data-filter="expired" onclick="setFilter('expired')">Abgelaufen</button>
        <button class="filter-tab" data-filter="warning" onclick="setFilter('warning')">Bald fällig</button>
        <button class="filter-tab" data-filter="medications" onclick="setFilter('medications')">Medikamente</button>
        <button class="filter-tab" data-filter="equipment" onclick="setFilter('equipment')">Ausrüstung</button>
      </div>
    </div>

    <div class="stats-grid">
      <div class="stat-card"><div id="stat-ok" class="stat-number stat-ok">0</div><div class="stat-label">In Ordnung</div></div>
      <div class="stat-card"><div id="stat-warning" class="stat-number stat-warning">0</div><div class="stat-label">Bald fällig</div></div>
      <div class="stat-card"><div id="stat-expired" class="stat-number stat-expired">0</div><div class="stat-label">Abgelaufen</div></div>
      <div class="stat-card"><div id="stat-total" class="stat-number">0</div><div class="stat-label">Gesamt</div></div>
    </div>

    <div id="loading" class="loading"><i class="fas fa-spinner fa-spin"></i><div>Lade Lagerdaten...</div></div>
    <div id="item-list" class="item-list"></div>
    <div id="empty-state" class="empty-state" style="display:none"><i class="fas fa-search empty-icon"></i><div>Keine Artikel gefunden</div></div>
  </main>

  <button class="fab" onclick="showAddModal()"><i class="fas fa-plus"></i></button>

  <!-- Bottom nav -->
  <nav class="bottom-nav">
    <div class="nav-grid">
      <a href="#" class="nav-item"><i class="nav-icon fas fa-home"></i><span>Dashboard</span></a>
      <a href="#" class="nav-item active"><i class="nav-icon fas fa-boxes-stacked"></i><span>Lager</span></a>
      <a href="#" class="nav-item"><i class="nav-icon fas fa-qrcode"></i><span>Scannen</span></a>
      <a href="#" class="nav-item"><i class="nav-icon fas fa-chart-bar"></i><span>Berichte</span></a>
    </div>
  </nav>

  <!-- Modal -->
  <div id="item-modal" class="modal">
    <div class="modal-content">
      <h2 id="modal-title">Artikel hinzufügen</h2>
      <button class="close-btn" onclick="hideModal()">&times;</button>
      <form onsubmit="saveItem(event)">
        <div class="form-group"><label class="form-label">Name</label><input id="item-name" class="form-input" required></div>
        <div class="form-group"><label class="form-label">Kategorie</label>
          <select id="item-category" class="form-select" required>
            <option value="medications">Medikamente</option>
            <option value="equipment">Ausrüstung</option>
            <option value="supplies">Verbrauchsmaterial</option>
          </select></div>
        <div class="form-group"><label class="form-label">Menge</label><input id="item-quantity" type="number" min="0" class="form-input" required></div>
        <div class="form-group"><label class="form-label">Standort</label>
          <select id="item-location" class="form-select" required>
            <option value="vehicle-1">RTW 1</option>
            <option value="vehicle-2">RTW 2</option>
            <option value="station">Wache</option>
            <option value="storage">Lager</option>
          </select></div>
        <div class="form-group"><label class="form-label">Ablaufdatum</label><input id="item-expiry" type="date" class="form-input"></div>
        <button type="submit" class="btn-primary">Speichern</button>
      </form>
    </div>
  </div>

  <script>
    // Dummy Daten
    let inventory=[{id:1,name:"Adrenalin",category:"medications",quantity:5,location:"vehicle-1",locationName:"RTW 1",expiry:"2025-07-15",status:"expired"}];
    let currentFilter="all",currentSearch="";

    function initApp(){renderInventory();updateStats()}
    function renderInventory(){
      const container=document.getElementById("item-list");
      const empty=document.getElementById("empty-state");
      let items=inventory.filter(i=>(!currentSearch||i.name.toLowerCase().includes(currentSearch.toLowerCase()))&&(currentFilter==="all"||i.status===currentFilter||i.category===currentFilter));
      if(!items.length){container.innerHTML="";empty.style.display="block";return}else empty.style.display="none";
      container.innerHTML=items.map(i=>`
        <div class="item-card status-${i.status}" onclick="editItem(${i.id})">
          <div class="item-header"><div class="item-name">${i.name}</div><div class="item-quantity">${i.quantity} Stk.</div></div>
          <div class="item-details"><div class="item-location"><i class="fas fa-map-marker-alt"></i>${i.locationName}</div><div>${i.expiry||"kein Datum"}</div></div>
        </div>`).join("")
    }
    function updateStats(){let s={ok:0,warning:0,expired:0,total:0};inventory.forEach(i=>{s.total++;s[i.status]++});document.getElementById("stat-ok").innerText=s.ok;document.getElementById("stat-warning").innerText=s.warning;document.getElementById("stat-expired").innerText=s.expired;document.getElementById("stat-total").innerText=s.total}
    function setFilter(f){currentFilter=f;document.querySelectorAll(".filter-tab").forEach(t=>t.classList.remove("active"));document.querySelector(`[data-filter="${f}"]`).classList.add("active");renderInventory()}
    function filterItems(v){currentSearch=v;renderInventory()}
    function showAddModal(){document.getElementById("modal-title").innerText="Artikel hinzufügen";document.getElementById("item-modal").classList.add("show")}
    function hideModal(){document.getElementById("item-modal").classList.remove("show")}
    function saveItem(e){e.preventDefault();hideModal()}
    function editItem(id){alert("Bearbeiten von "+id)}
    function goBack(){alert("Zurück")}
    function scanBarcode(){alert("Scan Simulation")}
    document.addEventListener("DOMContentLoaded",initApp)
  </script>
</body>
</html>